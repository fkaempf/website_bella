<!DOCTYPE html>
<!-- v1 - StaggeredMenu navigation variant -->
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Isabella Beckett | Staggered Menu</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600&family=IBM+Plex+Serif:wght@400;500;600&family=Space+Grotesk:wght@300;400;500;700&display=swap"
    rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

  <style>
    :root {
      --bg-primary: #0f0c29;
      --text-primary: #e8e8e8;
      --text-secondary: #a0a0a0;
      --text-muted: #666;
      --accent: #8ec5fc;
      --accent-secondary: #e0c3fc;
      --transition: 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    }

    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'IBM Plex Sans', sans-serif;
      color: var(--text-primary);
      background: var(--bg-primary);
      overflow: hidden;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }

    .gradient-bg {
      position: fixed; inset: 0; z-index: 0;
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e, #0f0c29);
      background-size: 400% 400%;
      animation: gradientShift 12s ease infinite;
    }
    @keyframes gradientShift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

    .orb { position: fixed; border-radius: 50%; filter: blur(100px); opacity: 0.25; pointer-events: none; z-index: 0; }
    .orb-1 { width: 500px; height: 500px; background: radial-gradient(circle, #e040fb, #7c4dff); top: -10%; left: -10%; animation: f1 18s ease-in-out infinite; }
    .orb-2 { width: 400px; height: 400px; background: radial-gradient(circle, #00e5ff, #1de9b6); bottom: -15%; right: -10%; animation: f2 22s ease-in-out infinite; }
    .orb-3 { width: 350px; height: 350px; background: radial-gradient(circle, #ff6090, #ff80ab); top: 40%; left: 50%; animation: f3 16s ease-in-out infinite; }
    @keyframes f1 { 0%, 100% { transform: translate(0,0) scale(1) } 33% { transform: translate(120px,80px) scale(1.1) } 66% { transform: translate(-60px,140px) scale(.95) } }
    @keyframes f2 { 0%, 100% { transform: translate(0,0) scale(1) } 33% { transform: translate(-100px,-60px) scale(1.15) } 66% { transform: translate(80px,-120px) scale(.9) } }
    @keyframes f3 { 0%, 100% { transform: translate(0,0) scale(1) } 50% { transform: translate(-140px,-100px) scale(1.08) } }

    .grain {
      position: fixed; inset: 0; z-index: 1; pointer-events: none; opacity: 0.04;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
      background-repeat: repeat; background-size: 200px 200px;
    }

    /* Header with toggle */
    .sm-header {
      position: fixed; top: 0; left: 0; right: 0;
      display: flex; align-items: center; justify-content: space-between;
      padding: 2rem 2.5rem;
      z-index: 60;
      pointer-events: none;
    }

    .sm-header > * { pointer-events: auto; }

    .sm-logo {
      font-family: 'Space Grotesk', sans-serif;
      font-weight: 600; font-size: 0.85rem;
      letter-spacing: 0.08em; text-transform: uppercase;
      color: #fff;
      display: flex; align-items: center; gap: 0.6rem;
    }

    .sm-logo img {
      width: 32px; height: 32px; border-radius: 50%; object-fit: cover;
    }

    .sm-toggle {
      display: flex; align-items: center; gap: 0.5rem;
      background: none; border: none; cursor: pointer;
      color: #fff; font-family: 'IBM Plex Sans', sans-serif;
      font-weight: 500; font-size: 0.85rem;
    }

    .sm-toggle-text {
      overflow: hidden; height: 1em; position: relative;
    }

    .sm-toggle-inner {
      display: flex; flex-direction: column; line-height: 1;
    }

    .sm-toggle-line { display: block; height: 1em; line-height: 1; }

    .sm-icon {
      position: relative; width: 14px; height: 14px;
      display: inline-flex; align-items: center; justify-content: center;
    }

    .sm-icon-line {
      position: absolute; left: 50%; top: 50%;
      width: 100%; height: 2px;
      background: currentColor; border-radius: 2px;
      transform: translate(-50%, -50%);
    }

    .sm-icon-line:last-child { transform: translate(-50%, -50%) rotate(90deg); }

    /* Slide-in panel */
    .sm-prelayer {
      position: fixed; top: 0; right: 0; bottom: 0;
      width: clamp(280px, 40vw, 440px);
      z-index: 55;
      pointer-events: none;
    }

    .sm-prelayer-1 { background: var(--accent-secondary); }
    .sm-prelayer-2 { background: var(--accent); }

    .sm-panel {
      position: fixed; top: 0; right: 0; bottom: 0;
      width: clamp(280px, 40vw, 440px);
      z-index: 56;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      display: flex; flex-direction: column;
      padding: 7rem 2.5rem 2.5rem;
      overflow-y: auto;
      pointer-events: auto;
    }

    .sm-panel-list {
      list-style: none; display: flex; flex-direction: column; gap: 0.5rem;
      counter-reset: smItem;
    }

    .sm-panel-item {
      position: relative;
      color: #111;
      font-family: 'Space Grotesk', sans-serif;
      font-weight: 600;
      font-size: clamp(2rem, 4vw, 3.2rem);
      line-height: 1;
      letter-spacing: -1px;
      text-transform: uppercase;
      text-decoration: none;
      cursor: pointer;
      padding: 0.3rem 0;
      display: block;
      transition: color 0.25s ease;
      overflow: hidden;
      background: none;
      border: none;
      text-align: left;
      width: 100%;
    }

    .sm-panel-item::before {
      counter-increment: smItem;
      content: counter(smItem, decimal-leading-zero);
      position: absolute; top: 0.15em; right: 0;
      font-size: 0.45em; font-weight: 400;
      color: var(--accent);
      letter-spacing: 0; opacity: 0;
    }

    .sm-panel-item:hover { color: #8ec5fc; }

    .sm-panel-itemLabel {
      display: inline-block;
      transform-origin: 50% 100%;
    }

    .sm-socials {
      margin-top: auto; padding-top: 2rem;
      display: flex; flex-direction: column; gap: 0.5rem;
    }

    .sm-socials-title {
      font-size: 0.75rem; font-weight: 500;
      color: #8ec5fc; text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .sm-socials-list {
      list-style: none; display: flex; gap: 1rem; flex-wrap: wrap;
    }

    .sm-socials-link {
      font-size: 0.85rem; font-weight: 500;
      color: #333; text-decoration: none;
      transition: color 0.3s ease, opacity 0.3s ease;
    }

    .sm-socials-list:hover .sm-socials-link { opacity: 0.35; }
    .sm-socials-list:hover .sm-socials-link:hover { opacity: 1; color: #8ec5fc; }

    /* Hero */
    .hero {
      position: relative; z-index: 2;
      display: flex; flex-direction: column;
      align-items: flex-start; justify-content: center;
      min-height: 100vh;
      padding: 4rem 6rem;
    }

    .profile-image {
      width: 120px; height: 120px; border-radius: 50%;
      border: 1px solid rgba(255,255,255,0.08);
      object-fit: cover; margin-bottom: 1.5rem;
      opacity: 0; transform: scale(0.9);
      animation: fadeInUp 0.8s ease 0.2s forwards;
    }

    .hero-name {
      font-family: 'Space Grotesk', sans-serif;
      font-weight: 700; font-size: clamp(2.2rem, 4vw, 3.5rem);
      letter-spacing: 0.03em; text-transform: uppercase;
      line-height: 1.1; margin-bottom: 0.6rem; color: #fff;
      opacity: 0; transform: translateY(20px);
      animation: fadeInUp 0.8s ease 0.4s forwards;
    }

    .hero-tagline {
      font-weight: 300; font-size: clamp(0.75rem, 1.2vw, 0.9rem);
      letter-spacing: 0.2em; text-transform: uppercase;
      color: rgba(255,255,255,0.35);
      opacity: 0; transform: translateY(20px);
      animation: fadeInUp 0.8s ease 0.6s forwards;
    }

    @keyframes fadeInUp { to { opacity: 1; transform: translateY(0) scale(1); } }

    /* Popup styles */
    .popup-overlay {
      position: fixed; inset: 0; z-index: 100;
      display: flex; align-items: center; justify-content: center;
      background: rgba(5,3,15,0.5);
      backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px);
      opacity: 0; pointer-events: none; transition: opacity 0.35s ease;
    }
    .popup-overlay.active { opacity: 1; pointer-events: auto; }

    .popup {
      width: 90%; max-width: 620px; max-height: 75vh; overflow-y: auto;
      border-radius: 24px; padding: 2.5rem; position: relative;
      background: rgba(15,12,41,0.55);
      backdrop-filter: blur(24px) saturate(1.3); -webkit-backdrop-filter: blur(24px) saturate(1.3);
      border: 1px solid rgba(255,255,255,0.08);
      box-shadow: 0 0 0 1px rgba(255,255,255,0.03) inset, 0 8px 32px rgba(0,0,0,0.4), 0 0 80px rgba(142,197,252,0.04);
      transform: scale(0.92) translateY(20px); opacity: 0;
      transition: transform 0.4s cubic-bezier(0.16,1,0.3,1), opacity 0.35s ease;
    }
    .popup-overlay.active .popup { transform: scale(1) translateY(0); opacity: 1; }
    .popup::-webkit-scrollbar { width: 4px; }
    .popup::-webkit-scrollbar-track { background: transparent; }
    .popup::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 4px; }

    .popup-close {
      position: absolute; top: 1.2rem; right: 1.2rem;
      width: 32px; height: 32px; border-radius: 50%;
      border: 1px solid rgba(255,255,255,0.08); background: rgba(255,255,255,0.04);
      color: rgba(255,255,255,0.4); cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      font-size: 1rem; transition: all 0.3s ease;
    }
    .popup-close:hover { background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.8); }

    .popup-label { font-size: 0.6rem; font-weight: 500; letter-spacing: 0.25em; text-transform: uppercase; color: var(--accent); margin-bottom: 0.6rem; }
    .popup-title { font-family: 'IBM Plex Serif', serif; font-weight: 500; font-size: 1.5rem; margin-bottom: 1.5rem; }
    .popup p { color: var(--text-secondary); font-weight: 300; font-size: 0.9rem; line-height: 1.75; margin-bottom: 1rem; }
    .popup p:last-child { margin-bottom: 0; }

    .pub-item { padding: 1.1rem 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
    .pub-item:last-child { border-bottom: none; }
    .pub-year { font-size: 0.65rem; font-weight: 500; letter-spacing: 0.15em; color: var(--accent); margin-bottom: 0.35rem; }
    .pub-title { font-family: 'IBM Plex Serif', serif; font-weight: 500; font-size: 0.95rem; line-height: 1.5; margin-bottom: 0.35rem; }
    .pub-title a { color: var(--text-primary); text-decoration: none; transition: color var(--transition); }
    .pub-title a:hover { color: var(--accent); }
    .pub-authors { font-size: 0.78rem; font-weight: 300; color: var(--text-muted); margin-bottom: 0.2rem; }
    .pub-authors .me { color: var(--text-secondary); font-weight: 400; }
    .pub-journal { font-size: 0.78rem; font-style: italic; color: var(--text-muted); }
    .pub-note { font-style: normal; font-size: 0.7rem; color: var(--accent-secondary); }

    .research-block { padding: 1.2rem; border-radius: 12px; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05); margin-bottom: 0.8rem; }
    .research-block:hover { background: rgba(255,255,255,0.04); }
    .research-block h3 { font-family: 'IBM Plex Serif', serif; font-weight: 500; font-size: 0.95rem; margin-bottom: 0.5rem; }
    .research-block p { font-size: 0.85rem; margin-bottom: 0; }
    .research-tag { display: inline-block; font-size: 0.6rem; font-weight: 500; letter-spacing: 0.1em; text-transform: uppercase; color: var(--accent-secondary); margin-bottom: 0.4rem; }

    .contact-item { display: flex; align-items: center; gap: 0.8rem; padding: 0.7rem 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
    .contact-item:last-child { border-bottom: none; }
    .contact-icon { color: var(--text-muted); flex-shrink: 0; }
    .contact-item a { color: var(--text-secondary); text-decoration: none; font-weight: 300; font-size: 0.88rem; transition: color var(--transition); }
    .contact-item a:hover { color: var(--accent); }

    @media (max-width: 900px) {
      .sm-panel, .sm-prelayer { width: 100%; }
      .hero { padding: 3rem 2.5rem; }
      .profile-image { width: 90px; height: 90px; }
      .popup { width: 95%; max-height: 80vh; padding: 2rem 1.5rem; border-radius: 20px; }
    }
  </style>
</head>

<body>
  <div class="gradient-bg"></div>
  <div class="orb orb-1"></div>
  <div class="orb orb-2"></div>
  <div class="orb orb-3"></div>
  <div class="grain"></div>

  <!-- Header -->
  <header class="sm-header">
    <div class="sm-logo">
      <img src="../profile.jpeg" alt="" />
      <span>Isabella Beckett</span>
    </div>
    <button class="sm-toggle" id="sm-toggle" aria-label="Toggle menu">
      <span class="sm-toggle-text">
        <span class="sm-toggle-inner" id="sm-toggle-inner">
          <span class="sm-toggle-line">Menu</span>
          <span class="sm-toggle-line">Close</span>
        </span>
      </span>
      <span class="sm-icon" id="sm-icon">
        <span class="sm-icon-line"></span>
        <span class="sm-icon-line"></span>
      </span>
    </button>
  </header>

  <!-- Pre-layers -->
  <div class="sm-prelayer sm-prelayer-1" id="sm-prelayer-1"></div>
  <div class="sm-prelayer sm-prelayer-2" id="sm-prelayer-2"></div>

  <!-- Panel -->
  <aside class="sm-panel" id="sm-panel">
    <ul class="sm-panel-list">
      <li><button class="sm-panel-item" data-popup="about"><span class="sm-panel-itemLabel">About</span></button></li>
      <li><button class="sm-panel-item" data-popup="publications"><span class="sm-panel-itemLabel">Publications</span></button></li>
      <li><button class="sm-panel-item" data-popup="research"><span class="sm-panel-itemLabel">Research</span></button></li>
      <li><button class="sm-panel-item" data-popup="contact"><span class="sm-panel-itemLabel">Contact</span></button></li>
    </ul>
    <div class="sm-socials">
      <h3 class="sm-socials-title">Links</h3>
      <ul class="sm-socials-list">
        <li><a href="https://scholar.google.com/citations?user=oLSyhNIAAAAJ" target="_blank" rel="noopener" class="sm-socials-link">Google Scholar</a></li>
        <li><a href="https://www2.mrc-lmb.cam.ac.uk/research/neurobiology/" target="_blank" rel="noopener" class="sm-socials-link">MRC LMB</a></li>
      </ul>
    </div>
  </aside>

  <!-- Hero -->
  <div class="hero">
    <img class="profile-image" src="../profile.jpeg" alt="Isabella Beckett" />
    <h1 class="hero-name">Isabella<br>Beckett</h1>
    <p class="hero-tagline">Drosophila &middot; Neuroscience &middot; Connectomics</p>
  </div>

  <!-- Popups -->
  <div class="popup-overlay" id="popup-about">
    <div class="popup">
      <button class="popup-close">&times;</button>
      <p class="popup-label">About</p><h2 class="popup-title">About</h2>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
      <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>
  </div>

  <div class="popup-overlay" id="popup-publications">
    <div class="popup">
      <button class="popup-close">&times;</button>
      <p class="popup-label">Publications</p><h2 class="popup-title">Publications</h2>
      <div class="pub-item">
        <p class="pub-year">2025</p>
        <p class="pub-title"><a href="https://doi.org/10.1101/2025.10.09.680999" target="_blank" rel="noopener">Sexual dimorphism in the complete connectome of the <em>Drosophila</em> male central nervous system</a></p>
        <p class="pub-authors">Berg S*, <span class="me">Beckett IR*</span>, Costa M*, Schlegel P*, ... Rubin GM, Jefferis GSXE</p>
        <p class="pub-journal">bioRxiv <span class="pub-note">* Equal contribution</span></p>
      </div>
      <div class="pub-item">
        <p class="pub-year">2025</p>
        <p class="pub-title"><a href="https://doi.org/10.1101/2025.08.25.671814" target="_blank" rel="noopener">From Sensory Detection to Motor Action: The Comprehensive <em>Drosophila</em> Taste-Feeding Connectome</a></p>
        <p class="pub-authors">Tastekin I, de Haan Vicente I, Beresford RJ, Morris BJ, <span class="me">Beckett I</span>, Schlegel P, Costa M, Jefferis GSXE, Ribeiro C</p>
        <p class="pub-journal">bioRxiv</p>
      </div>
      <div class="pub-item">
        <p class="pub-year">2025</p>
        <p class="pub-title"><a href="https://doi.org/10.1101/2025.07.16.664682" target="_blank" rel="noopener">A Developmental Atlas of the <em>Drosophila</em> Nerve Cord Uncovers a Global Temporal Code for Neuronal Identity</a></p>
        <p class="pub-authors">Cachero S, Mitletton M, <span class="me">Beckett IR</span>, Marin EC, Serratosa Capdevila L, Gkantia M, Lacin H, Jefferis GSXE, Don&agrave; E</p>
        <p class="pub-journal">bioRxiv</p>
      </div>
      <div class="pub-item">
        <p class="pub-year">2025</p>
        <p class="pub-title"><a href="https://doi.org/10.1038/s41586-025-08925-z" target="_blank" rel="noopener">Comparative connectomics of <em>Drosophila</em> descending and ascending neurons</a></p>
        <p class="pub-authors">St&uuml;rner T, Brooks P, Serratosa Capdevila L, Morris BJ, Javier A, Fang S, Gkantia M, Cachero S, <span class="me">Beckett IR</span>, Marin EC, Schlegel P, ... Costa M, Jefferis GSXE, Eichler K</p>
        <p class="pub-journal">Nature 643, 158&ndash;172</p>
      </div>
    </div>
  </div>

  <div class="popup-overlay" id="popup-research">
    <div class="popup">
      <button class="popup-close">&times;</button>
      <p class="popup-label">Research</p><h2 class="popup-title">Research</h2>
      <div class="research-block"><span class="research-tag">Current</span><h3>Lorem Ipsum Dolor Sit Amet</h3><p>Consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p></div>
      <div class="research-block"><span class="research-tag">Methods</span><h3>Sed Ut Perspiciatis Unde Omnis</h3><p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit.</p></div>
      <div class="research-block"><span class="research-tag">Collaboration</span><h3>At Vero Eos Et Accusamus</h3><p>Et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti.</p></div>
    </div>
  </div>

  <div class="popup-overlay" id="popup-contact">
    <div class="popup">
      <button class="popup-close">&times;</button>
      <p class="popup-label">Contact</p><h2 class="popup-title">Contact</h2>
      <div class="contact-item">
        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" class="contact-icon"><path d="M5.242 13.769L0 9.5 12 0l12 9.5-5.242 4.269C17.548 11.249 14.978 9.5 12 9.5c-2.977 0-5.548 1.748-6.758 4.269zM12 10a7 7 0 1 0 0 14 7 7 0 0 0 0-14z"/></svg>
        <a href="https://scholar.google.com/citations?user=oLSyhNIAAAAJ" target="_blank" rel="noopener">Google Scholar Profile</a>
      </div>
      <div class="contact-item">
        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" class="contact-icon"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
        <a href="https://www2.mrc-lmb.cam.ac.uk/research/neurobiology/" target="_blank" rel="noopener">MRC LMB Neurobiology</a>
      </div>
      <div class="contact-item">
        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" class="contact-icon"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
        <a href="mailto:placeholder@mrc-lmb.cam.ac.uk">placeholder@mrc-lmb.cam.ac.uk</a>
      </div>
    </div>
  </div>

  <script>
    (function() {
      var toggle = document.getElementById('sm-toggle');
      var icon = document.getElementById('sm-icon');
      var textInner = document.getElementById('sm-toggle-inner');
      var panel = document.getElementById('sm-panel');
      var pre1 = document.getElementById('sm-prelayer-1');
      var pre2 = document.getElementById('sm-prelayer-2');
      var itemLabels = panel.querySelectorAll('.sm-panel-itemLabel');
      var panelItems = panel.querySelectorAll('.sm-panel-item');
      var socialsTitle = panel.querySelector('.sm-socials-title');
      var socialLinks = panel.querySelectorAll('.sm-socials-link');
      var isOpen = false;

      // Initial state — everything offscreen right
      gsap.set([pre1, pre2, panel], { xPercent: 100 });
      gsap.set(itemLabels, { yPercent: 140, rotate: 10 });
      gsap.set(panelItems, { '--num-opacity': 0 });
      if (socialsTitle) gsap.set(socialsTitle, { opacity: 0 });
      gsap.set(socialLinks, { y: 25, opacity: 0 });

      function openMenu() {
        var tl = gsap.timeline();
        tl.to(pre1, { xPercent: 0, duration: 0.5, ease: 'power4.out' }, 0);
        tl.to(pre2, { xPercent: 0, duration: 0.5, ease: 'power4.out' }, 0.07);
        tl.to(panel, { xPercent: 0, duration: 0.65, ease: 'power4.out' }, 0.15);
        tl.to(itemLabels, { yPercent: 0, rotate: 0, duration: 1, ease: 'power4.out', stagger: 0.1 }, 0.25);
        tl.to(panelItems, { '--num-opacity': 1, duration: 0.6, ease: 'power2.out', stagger: 0.08 }, 0.35);
        if (socialsTitle) tl.to(socialsTitle, { opacity: 1, duration: 0.5, ease: 'power2.out' }, 0.5);
        tl.to(socialLinks, { y: 0, opacity: 1, duration: 0.55, ease: 'power3.out', stagger: 0.08 }, 0.54);

        // Icon rotates to X
        gsap.to(icon, { rotate: 225, duration: 0.8, ease: 'power4.out' });
        // Text slides
        gsap.to(textInner, { yPercent: -50, duration: 0.5, ease: 'power4.out' });
      }

      function closeMenu() {
        gsap.to([pre1, pre2, panel], {
          xPercent: 100, duration: 0.32, ease: 'power3.in',
          onComplete: function() {
            gsap.set(itemLabels, { yPercent: 140, rotate: 10 });
            gsap.set(panelItems, { '--num-opacity': 0 });
            if (socialsTitle) gsap.set(socialsTitle, { opacity: 0 });
            gsap.set(socialLinks, { y: 25, opacity: 0 });
          }
        });
        gsap.to(icon, { rotate: 0, duration: 0.35, ease: 'power3.inOut' });
        gsap.to(textInner, { yPercent: 0, duration: 0.5, ease: 'power4.out' });
      }

      toggle.addEventListener('click', function() {
        isOpen = !isOpen;
        if (isOpen) openMenu(); else closeMenu();
      });

      // Panel item click → open popup, close panel
      panelItems.forEach(function(item) {
        item.addEventListener('click', function() {
          var popupId = 'popup-' + item.dataset.popup;
          document.getElementById(popupId).classList.add('active');
          isOpen = false;
          closeMenu();
        });
      });

      // Close popups
      document.querySelectorAll('.popup-overlay').forEach(function(ov) {
        ov.addEventListener('click', function(e) { if (e.target === ov) ov.classList.remove('active'); });
      });
      document.querySelectorAll('.popup-close').forEach(function(btn) {
        btn.addEventListener('click', function() { btn.closest('.popup-overlay').classList.remove('active'); });
      });
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          document.querySelectorAll('.popup-overlay.active').forEach(function(ov) { ov.classList.remove('active'); });
          if (isOpen) { isOpen = false; closeMenu(); }
        }
      });

      // Click outside panel to close
      document.addEventListener('mousedown', function(e) {
        if (isOpen && !panel.contains(e.target) && !toggle.contains(e.target)) {
          isOpen = false;
          closeMenu();
        }
      });
    })();
  </script>
</body>
</html>
